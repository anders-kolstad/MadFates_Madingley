<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Step 1 - 3 | Running the Madingley Model with Norwegian data</title>
  <meta name="description" content="Chapter 3 Step 1 - 3 | Running the Madingley Model with Norwegian data" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Step 1 - 3 | Running the Madingley Model with Norwegian data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Step 1 - 3 | Running the Madingley Model with Norwegian data" />
  
  
  

<meta name="author" content="Anders L. Kolstad" />


<meta name="date" content="2021-12-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="installation.html"/>
<link rel="next" href="step-4---spin-up-and-demonstrating-plotting-functions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.19/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-fixedcolumns-1.10.20/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-fixedcolumns-1.10.20/js/dataTables.fixedColumns.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#some-useful-links"><i class="fa fa-check"></i><b>1.1</b> Some useful links</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#examples-of-use"><i class="fa fa-check"></i><b>1.1.1</b> Examples of use</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#terms-and-definitions"><i class="fa fa-check"></i><b>1.2</b> Terms and definitions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a></li>
<li class="chapter" data-level="3" data-path="step-1---3.html"><a href="step-1---3.html"><i class="fa fa-check"></i><b>3</b> Step 1 - 3</a><ul>
<li class="chapter" data-level="3.1" data-path="step-1---3.html"><a href="step-1---3.html#step-1---load-data"><i class="fa fa-check"></i><b>3.1</b> Step 1 - Load data</a></li>
<li class="chapter" data-level="3.2" data-path="step-1---3.html"><a href="step-1---3.html#step-2---modify-input-parameters"><i class="fa fa-check"></i><b>3.2</b> Step 2 - Modify input parameters</a></li>
<li class="chapter" data-level="3.3" data-path="step-1---3.html"><a href="step-1---3.html#step-3---initialisation"><i class="fa fa-check"></i><b>3.3</b> Step 3 - Initialisation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="step-4---spin-up-and-demonstrating-plotting-functions.html"><a href="step-4---spin-up-and-demonstrating-plotting-functions.html"><i class="fa fa-check"></i><b>4</b> Step 4 - Spin-up and demonstrating plotting functions</a></li>
<li class="chapter" data-level="5" data-path="norway---default-settings.html"><a href="norway---default-settings.html"><i class="fa fa-check"></i><b>5</b> Norway - default settings</a><ul>
<li class="chapter" data-level="5.1" data-path="norway---default-settings.html"><a href="norway---default-settings.html#grid-cells"><i class="fa fa-check"></i><b>5.1</b> 16 grid cells</a></li>
<li class="chapter" data-level="5.2" data-path="norway---default-settings.html"><a href="norway---default-settings.html#single-grid-cell"><i class="fa fa-check"></i><b>5.2</b> Single grid cell</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="exploring-spatial-inputs.html"><a href="exploring-spatial-inputs.html"><i class="fa fa-check"></i><b>6</b> Exploring spatial inputs</a><ul>
<li class="chapter" data-level="6.1" data-path="exploring-spatial-inputs.html"><a href="exploring-spatial-inputs.html#climate-data"><i class="fa fa-check"></i><b>6.1</b> Climate data</a></li>
<li class="chapter" data-level="6.2" data-path="exploring-spatial-inputs.html"><a href="exploring-spatial-inputs.html#other-spatial-inputs"><i class="fa fa-check"></i><b>6.2</b> Other spatial inputs</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="trophic-pyramids.html"><a href="trophic-pyramids.html"><i class="fa fa-check"></i><b>7</b> Trophic pyramids</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Running the Madingley Model with Norwegian data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="step-1---3" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Step 1 - 3</h1>
<div id="step-1---load-data" class="section level2">
<h2><span class="header-section-number">3.1</span> Step 1 - Load data</h2>
<p>Defining the study area in degree long-lat.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="step-1---3.html#cb10-1"></a>spatial_window =<span class="st"> </span><span class="kw">c</span>(<span class="dv">31</span>, <span class="dv">35</span>, <span class="dv">-5</span>, <span class="dv">-1</span>)</span></code></pre></div>
<p>Plot the spatial window to check selection</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="step-1---3.html#cb11-1"></a><span class="kw">plot_spatialwindow</span>(spatial_window)</span></code></pre></div>
<p><img src="02-initialisation_files/figure-html/unnamed-chunk-2-1.png" width="672" />
This corresponds to somewhere in the Serengetti I think.</p>
<p>This is the default data to initialise the model. The spatial inputs is a relatively big list of raster files, but the others are small data frames.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="step-1---3.html#cb12-1"></a>sptl_inp =<span class="st"> </span><span class="kw">madingley_inputs</span>(<span class="st">&quot;spatial inputs&quot;</span>)</span></code></pre></div>
<pre><code>% Warning: package &#39;rgdal&#39; was built under R version 4.1.2</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="step-1---3.html#cb14-1"></a>chrt_def =<span class="st"> </span><span class="kw">madingley_inputs</span>(<span class="st">&quot;cohort definition&quot;</span>)</span>
<span id="cb14-2"><a href="step-1---3.html#cb14-2"></a>stck_def =<span class="st"> </span><span class="kw">madingley_inputs</span>(<span class="st">&quot;stock definition&quot;</span>)</span>
<span id="cb14-3"><a href="step-1---3.html#cb14-3"></a>mdl_prms =<span class="st"> </span><span class="kw">madingley_inputs</span>(<span class="st">&quot;model parameters&quot;</span>) <span class="co"># useful later for running the model</span></span></code></pre></div>
<p>The Spatial Input is the environmental variables in the form of several raster layers. I think the 12 slots are months of a year.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="step-1---3.html#cb15-1"></a><span class="kw">str</span>(sptl_inp,<span class="dv">2</span>)</span></code></pre></div>
<pre><code>% List of 13
%  $ realm_classification                :Formal class &#39;RasterLayer&#39; [package &quot;raster&quot;] with 12 slots
%  $ land_mask                           :Formal class &#39;RasterLayer&#39; [package &quot;raster&quot;] with 12 slots
%  $ hanpp                               :Formal class &#39;RasterLayer&#39; [package &quot;raster&quot;] with 12 slots
%  $ available_water_capacity            :Formal class &#39;RasterLayer&#39; [package &quot;raster&quot;] with 12 slots
%  $ Ecto_max                            :Formal class &#39;RasterLayer&#39; [package &quot;raster&quot;] with 12 slots
%  $ Endo_C_max                          :Formal class &#39;RasterLayer&#39; [package &quot;raster&quot;] with 12 slots
%  $ Endo_H_max                          :Formal class &#39;RasterLayer&#39; [package &quot;raster&quot;] with 12 slots
%  $ Endo_O_max                          :Formal class &#39;RasterLayer&#39; [package &quot;raster&quot;] with 12 slots
%  $ terrestrial_net_primary_productivity:Formal class &#39;RasterBrick&#39; [package &quot;raster&quot;] with 12 slots
%  $ near-surface_temperature            :Formal class &#39;RasterBrick&#39; [package &quot;raster&quot;] with 12 slots
%  $ precipitation                       :Formal class &#39;RasterBrick&#39; [package &quot;raster&quot;] with 12 slots
%  $ ground_frost_frequency              :Formal class &#39;RasterBrick&#39; [package &quot;raster&quot;] with 12 slots
%  $ diurnal_temperature_range           :Formal class &#39;RasterBrick&#39; [package &quot;raster&quot;] with 12 slots</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="step-1---3.html#cb17-1"></a>temp &lt;-<span class="st"> </span>sptl_inp<span class="op">$</span>precipitation</span>
<span id="cb17-2"><a href="step-1---3.html#cb17-2"></a><span class="kw">class</span>(temp)</span></code></pre></div>
<pre><code>% [1] &quot;RasterBrick&quot;
% attr(,&quot;package&quot;)
% [1] &quot;raster&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="step-1---3.html#cb19-1"></a>temp</span></code></pre></div>
<pre><code>% class      : RasterBrick 
% dimensions : 180, 360, 64800, 12  (nrow, ncol, ncell, nlayers)
% resolution : 1, 1  (x, y)
% extent     : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
% crs        : NA 
% source     : memory
% names      : precipitation_01, precipitation_02, precipitation_03, precipitation_04, precipitation_05, precipitation_06, precipitation_07, precipitation_08, precipitation_09, precipitation_10, precipitation_11, precipitation_12 
% min values :                0,                0,                0,                0,                0,                0,                0,                0,                0,                0,                0,                0 
% max values :         660.1902,         580.5394,         528.9492,         519.1000,         571.3623,         867.7639,         897.7082,         815.6902,         585.4082,         610.5918,         569.8918,         637.4180</code></pre>
<p>The resolution is 1 degree, which is approx. 111 km at the equator.</p>
<p>Plotting precipitation for months jan-april</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="step-1---3.html#cb21-1"></a><span class="kw">plot</span>(temp[[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]])</span></code></pre></div>
<p><img src="02-initialisation_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="step-1---3.html#cb22-1"></a><span class="kw">rm</span>(temp)</span></code></pre></div>
<p>The data has global coverage. I’m assuming this is WorldClim data, but not sure.</p>
<p>The cohort definitions look like this, and can be modified by the user.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="step-1---3.html#cb23-1"></a>DT<span class="op">::</span><span class="kw">datatable</span>(chrt_def,</span>
<span id="cb23-2"><a href="step-1---3.html#cb23-2"></a>  <span class="dt">extensions =</span> <span class="st">&quot;FixedColumns&quot;</span>,</span>
<span id="cb23-3"><a href="step-1---3.html#cb23-3"></a>  <span class="dt">options =</span> <span class="kw">list</span>(</span>
<span id="cb23-4"><a href="step-1---3.html#cb23-4"></a>    <span class="dt">scrollX =</span> <span class="ot">TRUE</span>,</span>
<span id="cb23-5"><a href="step-1---3.html#cb23-5"></a>    <span class="dt">scrollY=</span>T,</span>
<span id="cb23-6"><a href="step-1---3.html#cb23-6"></a>    <span class="dt">pageLength =</span> <span class="dv">10</span>))</span></code></pre></div>
<div id="htmlwidget-aae1c49ff249356a1ecb" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-aae1c49ff249356a1ecb">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9"],["Heterotroph","Heterotroph","Heterotroph","Heterotroph","Heterotroph","Heterotroph","Heterotroph","Heterotroph","Heterotroph"],["Herbivore","Carnivore","Omnivore","Herbivore","Carnivore","Omnivore","Herbivore","Carnivore","Omnivore"],["All","All","All","All","All","All","All","All","All"],["Terrestrial","Terrestrial","Terrestrial","Terrestrial","Terrestrial","Terrestrial","Terrestrial","Terrestrial","Terrestrial"],["Mobile","Mobile","Mobile","Mobile","Mobile","Mobile","Mobile","Mobile","Mobile"],["iteroparity","iteroparity","iteroparity","semelparity","semelparity","semelparity","iteroparity","iteroparity","iteroparity"],["Endotherm","Endotherm","Endotherm","Ectotherm","Ectotherm","Ectotherm","Ectotherm","Ectotherm","Ectotherm"],[0.5,0,0.38,0.5,0,0.36,0.5,0,0.36],[0,0.8,0.64,0,0.8,0.64,0,0.8,0.64],[0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5],[1,5,5,0.04,0.08,0.04,1,1.5,1.5],[7000000,800000,150000,500,2000,2000,100000,100000,55000],[50,50,50,50,50,50,50,50,50],["None","None","None","None","None","None","None","None","None"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DEFINITION_Heterotroph.Autotroph<\/th>\n      <th>DEFINITION_Nutrition.source<\/th>\n      <th>DEFINITION_Diet<\/th>\n      <th>DEFINITION_Realm<\/th>\n      <th>DEFINITION_Mobility<\/th>\n      <th>DEFINITION_Reproductive.strategy<\/th>\n      <th>DEFINITION_Endo.Ectotherm<\/th>\n      <th>PROPERTY_Herbivory.assimilation<\/th>\n      <th>PROPERTY_Carnivory.assimilation<\/th>\n      <th>PROPERTY_Proportion.suitable.time.active<\/th>\n      <th>PROPERTY_Minimum.mass<\/th>\n      <th>PROPERTY_Maximum.mass<\/th>\n      <th>PROPERTY_Initial.number.of.GridCellCohorts<\/th>\n      <th>NOTES_group.description<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"scrollY":true,"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[8,9,10,11,12,13]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>The stock definitions are in the default input data limited to evergreen and deciduous plants.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="step-1---3.html#cb24-1"></a>DT<span class="op">::</span><span class="kw">datatable</span>(stck_def,</span>
<span id="cb24-2"><a href="step-1---3.html#cb24-2"></a>  <span class="dt">extensions =</span> <span class="st">&quot;FixedColumns&quot;</span>,</span>
<span id="cb24-3"><a href="step-1---3.html#cb24-3"></a>  <span class="dt">options =</span> <span class="kw">list</span>(</span>
<span id="cb24-4"><a href="step-1---3.html#cb24-4"></a>    <span class="dt">scrollX =</span> <span class="ot">TRUE</span>,</span>
<span id="cb24-5"><a href="step-1---3.html#cb24-5"></a>    <span class="dt">scrollY=</span>T,</span>
<span id="cb24-6"><a href="step-1---3.html#cb24-6"></a>    <span class="dt">pageLength =</span> <span class="dv">10</span>))</span></code></pre></div>
<div id="htmlwidget-cc8a615ef75a0c3da553" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-cc8a615ef75a0c3da553">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["2","3"],["Autotroph","Autotroph"],["Photosynthesis","Photosynthesis"],[null,null],["Terrestrial","Terrestrial"],["Sessile","Sessile"],["Deciduous","Evergreen"],[null,null],[null,null],[null,null],[0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DEFINITION_Heterotroph.Autotroph<\/th>\n      <th>DEFINITION_Nutrition.source<\/th>\n      <th>DEFINITION_Diet<\/th>\n      <th>DEFINITION_Realm<\/th>\n      <th>DEFINITION_Mobility<\/th>\n      <th>DEFINITION_Leaf.strategy<\/th>\n      <th>PROPERTY_Herbivory.assimilation<\/th>\n      <th>PROPERTY_Carnivory.assimilation<\/th>\n      <th>PROPERTY_Proportion.herbivory<\/th>\n      <th>PROPERTY_Individual.mass<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"scrollY":true,"pageLength":10,"columnDefs":[{"className":"dt-right","targets":10},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>The model parameters are perhaps a bit more cryptic:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="step-1---3.html#cb25-1"></a>DT<span class="op">::</span><span class="kw">datatable</span>(mdl_prms,</span>
<span id="cb25-2"><a href="step-1---3.html#cb25-2"></a>  <span class="dt">extensions =</span> <span class="st">&quot;FixedColumns&quot;</span>,</span>
<span id="cb25-3"><a href="step-1---3.html#cb25-3"></a>  <span class="dt">options =</span> <span class="kw">list</span>(</span>
<span id="cb25-4"><a href="step-1---3.html#cb25-4"></a>    <span class="dt">scrollX =</span> <span class="ot">TRUE</span>,</span>
<span id="cb25-5"><a href="step-1---3.html#cb25-5"></a>    <span class="dt">scrollY=</span>T,</span>
<span id="cb25-6"><a href="step-1---3.html#cb25-6"></a>    <span class="dt">pageLength =</span> <span class="dv">20</span>))</span></code></pre></div>
<div id="htmlwidget-6160ffef4135a3f27299" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6160ffef4135a3f27299">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85"],["Activity_Parameters","Activity_Parameters","Activity_Parameters","Activity_Parameters","Dispersal_Parameters","Dispersal_Parameters","Dispersal_Parameters","Dispersal_Parameters","Dispersal_Parameters","Dispersal_Parameters","EatingCarnivory_Parameters","EatingCarnivory_Parameters","EatingCarnivory_Parameters","EatingCarnivory_Parameters","EatingCarnivory_Parameters","EatingCarnivory_Parameters","EatingCarnivory_Parameters","EatingCarnivory_Parameters","EatingOmnivory_Parameters","EatingHerbivory_Parameters","EatingHerbivory_Parameters","EatingHerbivory_Parameters","EatingHerbivory_Parameters","EatingHerbivory_Parameters","EatingHerbivory_Parameters","EatingHerbivory_Parameters","EatingHerbivory_Parameters","EatingHerbivory_Parameters","MetabolismEctotherm_Parameters","MetabolismEctotherm_Parameters","MetabolismEctotherm_Parameters","MetabolismEctotherm_Parameters","MetabolismEctotherm_Parameters","MetabolismEctotherm_Parameters","MetabolismEctotherm_Parameters","MetabolismEndotherm_Parameters","MetabolismEndotherm_Parameters","MetabolismEndotherm_Parameters","MetabolismEndotherm_Parameters","MetabolismEndotherm_Parameters","MetabolismEndotherm_Parameters","MetabolismHeterotroph_Parameters","MetabolismHeterotroph_Parameters","MetabolismHeterotroph_Parameters","Mortality_Parameters","Mortality_Parameters","Mortality_Parameters","Mortality_Parameters","Mortality_Parameters","Reproduction_Parameters","Reproduction_Parameters","Reproduction_Parameters","Reproduction_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters","VegetationModel_Parameters"],[6.61,1.6,1.51,1.53,0.0278,0.48,50000,0.0278,0.48,0.8,0.5,0.7,0.5,0.7,1,6e-06,1,0.7,0.1,0.7,0.7,0.7,0.7,1,1e-11,1,2.1,0.1,0.88,148984000000,0.69,8.617e-05,41918272883,0.69,0.036697248,0.7,908090839730,0.69,8.617e-05,0.0366972,37,0.71,0.69,8.617e-05,0.001,0.003,0.6,0.05,1,1.5,0.25,0.05,0.5,0.961644704,0.237468183,0.100597089,0.001184101,7.154615416,1.270782192,-1.828591558,0.844864063,0.040273936,1.013070062,0.020575964,-1.195235464,0.04309283,-1.478393163,0.139462774,-4.395910091,0.362742634,0.388125108,19.98393943,1.148698636,8.419032427,0.01,24,0.01,24,0.01,12,1,0.001,2,2.26032940698105e-06,0.476],["Activity","Activity","Activity","Activity","Diffusive Dispersal","Diffusive Dispersal","Responsive Dispersal","Responsive Dispersal","Responsive Dispersal","Responsive Dispersal","Eating Carnivory","Eating Carnivory","Eating Carnivory","Eating Carnivory","Eating Carnivory","Eating Carnivory","Eating Carnivory","Eating Carnivory","Eating Omnivory","Eating Herbivory","Eating Herbivory","Eating Herbivory","Eating Herbivory","Eating Herbivory","Eating Herbivory","Eating Herbivory","Eating Herbivory","Eating Herbivory","Metabolism Ectotherm","Metabolism Ectotherm","Metabolism Ectotherm","Metabolism Ectotherm","Metabolism Ectotherm","Metabolism Ectotherm","Metabolism Ectotherm","Metabolism Endotherm","Metabolism Endotherm","Metabolism Endotherm","Metabolism Endotherm","Metabolism Endotherm","Metabolism Endotherm","Metabolism Heterotroph","Metabolism Heterotroph","Metabolism Heterotroph","Mortality","Mortality","Mortality","Mortality","Mortality","Reproduction","Reproduction","Reproduction","Reproduction","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon","Terrestrial Carbon"],["Terrestrial Warming Tolerance Intercept","Terrestrial Warming Tolerance Slope","Terrestrial TSM Intercept","Terrestrial TSM Slope","Speed Body Mass Scalar","Speed Body Mass Exponent","Density Threshold Scaling","Speed Body Mass Scalar","Speed Body Mass Exponent","Starvation Dispersal Body Mass Threshold","Handling Time Scalar Terrestrial","Handling Time Exponent Terrestrial","Handling Time Scalar Marine (not applicable to current version)","Handling Time Exponent Marine (not applicable to current version)","Referenc eMass","Kill Rate Constant","Kill Rate Constant Mass Exponent","Feeding Preference Standard Deviation","Max Allowed Prey Ratio Omnivores","Handling Time Scalar Terrestrial","Handling Time Scalar Marine (not applicable to current version)","Handling Time Exponent Terrestrial","Handling Time Exponent Marine (not applicable to current version)","Reference Mass","Herbivory Rate Constant","Herbivory Rate Mass Exponent","Attack Rate Exponent Terrestrial","Fraction Edible Stock Mass","Metabolism Mass Exponent","Normalization Constant","Activation Energy","Boltzmann Constant","Normalization Constant BMR","Basal Metabolism Mass Exponent","Energy Scalar","Metabolism Mass Exponent","Normalization Constant","Activation Energy","Boltzmann Constant","Energy Scalar","Endotherm Body Temperature","Metabolism Mass Exponent","Activation Energy","Boltzmann Constant","Background mortailty Rate","Senescence mortality Rate","Starvation logistic Inflection Point","Starvation logistic Scaling Parameter","Starvation maximum Starvation Rate","Mass ratio Threshold","Mass evolution Probability Threshold","Mass evolution Standard Deviation","Semelparity adult Mass Allocation","Calculate Miami NPP, Max NPP","Calculate Miami NPP, T1NPP","Calculate Miami NPP, T2NPP","Calculate Miami NPP, PNPP","Fraction Structure Scalar","Calculate Fraction Evergreen A","Calculate Fraction Evergreen B","Calculate Fraction Evergreen C","Evergreen Annual Leaf Mortality Slope ","Evergreen Annual Leaf Mortality Intercept","Deciduous Annual Leaf Mortality Slope","Deciduous Annual Leaf Mortality Intercept","Fine Root Mortality Rate Slope","Fine Root Mortality Rate Intercept","Structural Mortality P2","Structural Mortality P1","Leaf Carbon Fixation, MaxFracStruct","Half Saturation Fire Mortality Rate","Scalar Fire Mortality Rate","NPP Half Saturation Fire Mortality Rate","NPP Scalar Fire Mortality Rate","Min Evergreen Annual Leaf Mortality","Max Evergreen Annual Leaf Mortality","Min Deciduous Annual Leaf Mortality","Max Deciduous Annual Leaf Mortality","Min Fine Root Mortality Rate","Max Fine Root Mortality Rate","Max Structural Mortality","Min Structural Mortality","Base Scalar Fire","Min Return Interval","Mass Carbon Per Mass Leaf Dry Matter"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>params<\/th>\n      <th>values<\/th>\n      <th>category<\/th>\n      <th>notes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"scrollY":true,"pageLength":20,"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100]}},"evals":[],"jsHooks":[]}</script>
<p>They are divided into 12 categories:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="step-1---3.html#cb26-1"></a><span class="kw">cat</span>(<span class="kw">unique</span>(mdl_prms<span class="op">$</span>category), <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>% Activity
% Diffusive Dispersal
% Responsive Dispersal
% Eating Carnivory
% Eating Omnivory
% Eating Herbivory
% Metabolism Ectotherm
% Metabolism Endotherm
% Metabolism Heterotroph
% Mortality
% Reproduction
% Terrestrial Carbon</code></pre>
</div>
<div id="step-2---modify-input-parameters" class="section level2">
<h2><span class="header-section-number">3.2</span> Step 2 - Modify input parameters</h2>
<p>We will not do any modifications at this stage</p>
</div>
<div id="step-3---initialisation" class="section level2">
<h2><span class="header-section-number">3.3</span> Step 3 - Initialisation</h2>
<p>Model initialisation is done using <code>madingley_init()</code> by supplying the input data above (excl. model parameters). Also one can set the maximum number of cohors allowed per cell. The default is 500 and max is 1000. a higher number increases computation time due to more cohort interactions.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="step-1---3.html#cb28-1"></a>mdata &lt;-<span class="st">  </span><span class="kw">madingley_init</span>(<span class="dt">spatial_window =</span> spatial_window,</span>
<span id="cb28-2"><a href="step-1---3.html#cb28-2"></a>                       <span class="dt">cohort_def =</span> chrt_def,</span>
<span id="cb28-3"><a href="step-1---3.html#cb28-3"></a>                       <span class="dt">stock_def =</span> stck_def,</span>
<span id="cb28-4"><a href="step-1---3.html#cb28-4"></a>                       <span class="dt">spatial_inputs =</span> sptl_inp,</span>
<span id="cb28-5"><a href="step-1---3.html#cb28-5"></a>                       <span class="dt">max_cohort =</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>% Processing: realm_classification, land_mask, hanpp, available_water_capacity
% Processing: Ecto_max, Endo_C_max, Endo_H_max, Endo_O_max
% Processing: terrestrial_net_primary_productivity_1-12
% Processing: near-surface_temperature_1-12
% Processing: precipitation_1-12
% Processing: ground_frost_frequency_1-12
% Processing: diurnal_temperature_range_1-12
% </code></pre>
<p>Runtime is just a few seconds.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="step-1---3.html#cb30-1"></a><span class="kw">str</span>(mdata, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>% List of 6
%  $ cohorts       :&#39;data.frame&#39;:   1584 obs. of  16 variables:
%  $ stocks        :&#39;data.frame&#39;:   32 obs. of  3 variables:
%  $ cohort_def    :&#39;data.frame&#39;:   9 obs. of  14 variables:
%  $ stock_def     :&#39;data.frame&#39;:   2 obs. of  10 variables:
%  $ spatial_window: num [1:4] 31 35 -5 -1
%  $ grid_size     : num 1</code></pre>
<p>The output contain the cohors and stocks for each pixel.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="step-1---3.html#cb32-1"></a><span class="kw">save</span>(mdata, chrt_def, mdl_prms, sptl_inp, stck_def, </span>
<span id="cb32-2"><a href="step-1---3.html#cb32-2"></a>        <span class="dt">file =</span> <span class="st">&quot;data/initOut_demo.RData&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="installation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="step-4---spin-up-and-demonstrating-plotting-functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
